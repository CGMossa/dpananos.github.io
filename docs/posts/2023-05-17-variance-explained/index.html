<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Demetri Pananos">
<meta name="dcterms.date" content="2023-05-14">

<title>Demetri Pananos Ph.D - Bad Takes on R squared</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../styles.css">
<meta property="og:title" content="Demetri Pananos Ph.D - Bad Takes on R squared">
<meta property="og:description" content="To the best of twitter’s ability, it seems the seemingly never ending bad takes on R squared as of late could be attributed to this tweet by Nassim Taleb.">
<meta property="og:site-name" content="Demetri Pananos Ph.D">
<meta name="twitter:title" content="Demetri Pananos Ph.D - Bad Takes on R squared">
<meta name="twitter:description" content="To the best of twitter’s ability, it seems the seemingly never ending bad takes on R squared as of late could be attributed to this tweet by Nassim Taleb.">
<meta name="twitter:creator" content="@PhDemetri">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Demetri Pananos Ph.D</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../consulting/index.html">
 <span class="menu-text">Consulting</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/Dpananos"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/PhDemetri"><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Bad Takes on R squared</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">Statistics</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Demetri Pananos </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">May 14, 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Sections</h2>
   
  <ul>
  <li><a href="#the-coefficient-of-determination-is-proportional-to-the-ratio-of-residual-variance-to-marginal-variance" id="toc-the-coefficient-of-determination-is-proportional-to-the-ratio-of-residual-variance-to-marginal-variance" class="nav-link active" data-scroll-target="#the-coefficient-of-determination-is-proportional-to-the-ratio-of-residual-variance-to-marginal-variance">The Coefficient of Determination is Proportional to The Ratio of Residual Variance to Marginal Variance</a></li>
  <li><a href="#the-coefficient-of-determination-bears-no-information-on-causation-or-reliability-of-inference" id="toc-the-coefficient-of-determination-bears-no-information-on-causation-or-reliability-of-inference" class="nav-link" data-scroll-target="#the-coefficient-of-determination-bears-no-information-on-causation-or-reliability-of-inference">The Coefficient of Determination Bears No Information on Causation or Reliability of Inference</a></li>
  <li><a href="#people-are-complex-data-is-noisy" id="toc-people-are-complex-data-is-noisy" class="nav-link" data-scroll-target="#people-are-complex-data-is-noisy">People Are Complex, Data is Noisy</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/Dpananos/dpananos.github.io/edit/main/posts/2023-05-17-variance-explained/index.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/Dpananos/dpananos.github.io/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<p>To the best of twitter’s ability, it seems the seemingly never ending bad takes on R squared as of late could be attributed to <a href="https://twitter.com/nntaleb/status/1658388770893250560">this tweet</a> by Nassim Taleb.</p>
<p>The tweet is a quote tweet of another user showing a scatter plot with a regression line, seemingly conveying that more plutocracy is associated with more murders. The quoted tweet concludes <em>“Hmm .. maybe inequality really is structural violence”</em>, which is what I anticipate caught Taleb’s attention.</p>
<p>But I’m not so much interested in the cause as I am the consequences. After that tweet, so many people came out and criticized the quoted tweet for…the regression’s R squared? Many claiming that the R squared was too low to support the author’s conclusion that inequality is structural violence.</p>
<p>These people are right for the wrong reasons. The author is not permitted to make such a conclusion on the basis of a simple regression alone, but the reason for that has nothing to do with the R squared.</p>
<p>In this post, I examine:</p>
<ul>
<li>What R squared (a.k.a coefficient of determination) is</li>
<li>What it is and isn’t good for, and</li>
<li>Try to identify exactly why people dig in their heels that a low R squared means the inference is not valid (or at least not reliable).</li>
</ul>
<p>I will focus almost exclusively on the coefficient of determination found in most OLS outputs, rather than say <a href="https://en.wikipedia.org/wiki/Pseudo-R-squared">generalized measures of R squared or pseudo R squared</a> which have more to do with likelihood ratio statistics and are more useful in prediction problems.</p>
<section id="the-coefficient-of-determination-is-proportional-to-the-ratio-of-residual-variance-to-marginal-variance" class="level2">
<h2 class="anchored" data-anchor-id="the-coefficient-of-determination-is-proportional-to-the-ratio-of-residual-variance-to-marginal-variance">The Coefficient of Determination is Proportional to The Ratio of Residual Variance to Marginal Variance</h2>
<p>The coefficient of determination is</p>
<p><span class="math display">\[ R^2 = 1 - \dfrac{\sum_j (y_j - \hat{y}_j)^2}{\sum_j (y_j - \bar{y}_j)^2} \&gt;.\]</span></p>
<p>Do a little algebra<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> and</p>
<p><span class="math display">\[ \begin{align}
&amp;= 1 - \dfrac{\frac{1}{n}}{\frac{1}{n}}\dfrac{\sum_j (y_j - \hat{y}_j)^2}{\sum_j (y_j - \bar{y}_j)^2} \\
&amp;= 1 - \dfrac{\hat{\sigma}^2_{y\mid x}}{\hat{\sigma}^2_y} \\
\end{align}\]</span></p>
<p>you see that <span class="math inline">\(R^2\)</span> is proportional to the ratio of residual variance <span class="math inline">\(\hat{\sigma}^2_{y\mid x}\)</span> to sample marginal variance <span class="math inline">\(\hat{\sigma}^2_y\)</span>. That’s it, that is all it measures; how much of the variance in the marginal distribution can be attributed to variation in the covariates. This is also why the statistic is often interpreted as “proportion of variance explained”.</p>
</section>
<section id="the-coefficient-of-determination-bears-no-information-on-causation-or-reliability-of-inference" class="level2">
<h2 class="anchored" data-anchor-id="the-coefficient-of-determination-bears-no-information-on-causation-or-reliability-of-inference">The Coefficient of Determination Bears No Information on Causation or Reliability of Inference</h2>
<p>Many of the complaints about R squared being too low go something like</p>
<blockquote class="blockquote">
<p><a href="https://twitter.com/PhDemetri/status/1658665814214553600">“…so bascially no connection that couldn’t be explained by unnoticed/ignored confounders”</a></p>
</blockquote>
<p>or</p>
<blockquote class="blockquote">
<p><a href="https://twitter.com/firstkaransingh/status/1657774655112097797">“R square is 18% how is it a good fit…But would you conclude the effect with such low R squared.”</a></p>
</blockquote>
<p>There are many more, but these are just two worth mentioning. What do these commenters mean here?</p>
<p>It would seem that confounding is suspected of the relationship. I agree; simple OLS is basically an examination of correlation and we all know correlation is not definitely evidence of causation. But R squared does not tell us about the presence or absence of confounding. In fact, <em>de facto</em> cases of causation can have low r squared. Here is an example.</p>
<p>Suppose you run a randomized control trial on a continuous in which the outcome has a standard deviation of 5 (variance of 25). You’re interested in a small effect size, but can power the experiment as much as you like. Let’s simulate this RCT to have 90% power. A t-test is the way to analyze these data to assess differences in mean outcomes, and this can be done using OLS. Given these assumptions, what do you think the expected R squared for the OLS would be?</p>
<p>How about less than 1%.</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p></p><figcaption class="figure-caption">R squared from 1,000 simulations of the aformentioned theoretical RCT. Treeatment balance is exactly 50/50 in each simulation. There is no other confounder, simply noise in the measurement process. This is what drives the low R squared</figcaption><p></p>
<p><img src="index_files/figure-html/unnamed-chunk-1-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>And yet, we have causation due to our assumptions. Clearly, large R squared has nothing to tell us about causation or the existence of an effect. Not even in theory, let alone practice. These comments just make no sense to me.</p>
</section>
<section id="people-are-complex-data-is-noisy" class="level2">
<h2 class="anchored" data-anchor-id="people-are-complex-data-is-noisy">People Are Complex, Data is Noisy</h2>
<p>Now, this previous example just provides a counter example to comments that claim results with low R squared can be brushed aside due to confounding or unreliability. I’ve clearly outlined a case where causation exists, the effects are detected with high probability, and yet the R squared is basically 0. You can’t get much lower than that.</p>
<p>Its a mostly mathematical type of response and I have to credit people who are able to communicate their thoughts more clearly to a non-mathematical audience than I can. I especially like <a href="https://twitter.com/smartin2018/status/1658898763551997952">this response</a> by Stephen Martin who comments on just how complex and enormous data generating processes in social science can be. Or <a href="https://twitter.com/e_considine/status/1658844083438190594">this response</a> by <span class="citation" data-cites="e_considine">@e_considine</span> which uses a clever thought experiment on killing people via the roll of a die a la No Country For Old Men. Credit to many of the people who responded to my threads, and I learned a lot in communication.</p>
<p>But the question remains: why do people believe a large r squared is important for inference? At this point I can only hypothesize, but let me do so anyway. Perhaps what these people are doing is confusing uncertainty in the data with uncertainty in an estimate.</p>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Worth mentioning here that dividing by <span class="math inline">\(1/n\)</span> ignores degrees of freedom spent in estimating <span class="math inline">\(\hat{y}\)</span>. This probably results in a little bit of bias in the finite sample case, but let’s pretend that we have enough data and few enough observations that this does not matter much. The adjusted <span class="math inline">\(R^2\)</span> does this propery by accounting for the degrees of freedom.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>