<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.28">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Demetri Pananos">
<meta name="dcterms.date" content="2022-11-25">

<title>Demetri Pananos Ph.D - Way Too Many Taylor Series</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../styles.css">
<meta property="og:title" content="Demetri Pananos Ph.D - Way Too Many Taylor Series">
<meta property="og:description" content="Listen, I’ve made some useful blog posts. I’ve made some silly blog posts. This blog post is absolutely not useful and is perhaps so silly as to be stupid.">
<meta property="og:site-name" content="Demetri Pananos Ph.D">
<meta name="twitter:title" content="Demetri Pananos Ph.D - Way Too Many Taylor Series">
<meta name="twitter:description" content="Listen, I’ve made some useful blog posts. I’ve made some silly blog posts. This blog post is absolutely not useful and is perhaps so silly as to be stupid.">
<meta name="twitter:creator" content="@PhDemetri">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Demetri Pananos Ph.D</span>
  </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">About</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../consulting/index.html">Consulting</a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/Dpananos"><i class="bi bi-github" role="img">
</i> 
 </a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/PhDemetri"><i class="bi bi-twitter" role="img">
</i> 
 </a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Way Too Many Taylor Series</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">Statistics</div>
                <div class="quarto-category">AB Testing</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Demetri Pananos </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">November 25, 2022</p>
      </div>
    </div>
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">Sections</h2>
   
  <ul>
  <li><a href="#tldr" id="toc-tldr" class="nav-link active" data-scroll-target="#tldr">TL;DR</a></li>
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#taylor-series-or-the-reason-i-kept-my-calculus-text-book" id="toc-taylor-series-or-the-reason-i-kept-my-calculus-text-book" class="nav-link" data-scroll-target="#taylor-series-or-the-reason-i-kept-my-calculus-text-book">Taylor Series (or The Reason I Kept My Calculus Text Book)</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/Dpananos/dpananos.github.io/edit/main/posts/2022-11-25-taylor-series/index.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/Dpananos/dpananos.github.io/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="tldr" class="level2">
<h2 class="anchored" data-anchor-id="tldr">TL;DR</h2>
<p>Listen, I’ve made some useful blog posts. I’ve made some silly blog posts. This blog post is absolutely not useful and is perhaps so silly as to be stupid. I’m going to give you the conclusion now: <em>You can do a t-test on the log scale and interpret that as a relative change in means</em>. That is the conclusion of this blog post. There, saved you 10 mins.</p>
</section>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Little back story to set the stage. I was tasked with writing down some guidance on how to evaluate A/B tests in which our OEC (overall evaluation criterion) is revenue. Revenue is long tailed, so typical justifications for using the t-test (CLT + Berry-Esseen) probably won’t work as well as we want.</p>
<p>What about doing some sort of transform (e.g.&nbsp;<span class="math inline">\(log\)</span>, which for some reason is used to represent <span class="math inline">\(\ln\)</span> in most statistical texts I’ve read, so I will continute that pattern here). Ok, that can reign in the tail, but there is a small problem: How do I interpret a difference in means on the log scale? Some say to interpret it as a relative change in means on the log scale (essentially just take the exponential of the diference in means to get the relative change), but that is not a mathematical equivalence. Let me demonstrate.</p>
<p>let <span class="math inline">\(Y_a = Y(A=a)\)</span> be a potential outcome under treatment status <span class="math inline">\(A=a\)</span>. Because exposure is randomly assigned in an A/B test, then <span class="math inline">\(E[Y \vert A]\)</span> consistently estimates <span class="math inline">\(E[Y_a]\)</span>. A difference in means on the log scale corresponds to the causal contrast</p>
<p><span class="math display">\[ \delta^\star = E[\log(Y_1)] - E[\log(Y_0)] = E\left[ \log \left( \dfrac{Y_1}{Y_0} \right) \right] \&gt;.\]</span></p>
<p>The relative change in means corresponds to the causal contrast</p>
<p><span class="math display">\[ \delta =   \dfrac{E[Y_1]}{E[Y_0]} \]</span></p>
<p>and generally <span class="math inline">\(\delta \neq \exp(\delta^\star)\)</span>. This is because a) Jensen’s inequality says <span class="math inline">\(\varphi(E[X]) \leq E[\varphi(X)]\)</span>, and b) because <span class="math inline">\(E[Y/X] \neq E[Y]/E[X]\)</span> (remember, <span class="math inline">\(E\)</span> is a linear operator).</p>
<p>So this blog post is going to waste both our time by answering some very precise questions:</p>
<ul>
<li>What approximations, if any, are neccesarily made to interpret <span class="math inline">\(\exp(\delta^\star)\)</span> as <span class="math inline">\(\delta\)</span>, and</li>
<li>Under what conditions are those approximations valid? When might they break?</li>
</ul>
<p>This is going to be a long one but a good one. This post is going to combine Applied Math + Statistics by way if lots and lots of Taylor Series. Speaking of which, it might be useful to review Taylor Series and their application to functions of random variables.</p>
<p>I can not stress how unimportant this blog post is. Its really just because I find the question compelling. I’d turn back if I were you…</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://bookdown.org/adam_aiken/advinv/images/03-compels.jpg" class="img-fluid figure-img"></p>
</figure>
</div>
<p>Ok, I warned you.</p>
</section>
<section id="taylor-series-or-the-reason-i-kept-my-calculus-text-book" class="level2">
<h2 class="anchored" data-anchor-id="taylor-series-or-the-reason-i-kept-my-calculus-text-book">Taylor Series (or The Reason I Kept My Calculus Text Book)</h2>
<p>The Taylor Series of a continuously differentiable function, <span class="math inline">\(f\)</span>, centered at <span class="math inline">\(t\)</span> is</p>
<p><span class="math display">\[ f(x) = \sum_{k=0}^{\infty} \dfrac{f^{(k)}(t)}{k!} (x-t)^k \quad \mid x - t \mid \lt d \&gt;. \]</span></p>
<p>The first <span class="math inline">\(n+1\)</span> terms form the Taylor polynomial of degree <span class="math inline">\(n\)</span>, <span class="math inline">\(T_n(x)\)</span>. The difference between the Taylor Polynomial and the function it approximates is known as the remainder <span class="math inline">\(R_n(x)\)</span>. We can bound <span class="math inline">\(R_n(x)\)</span>, meaning we can bound the error in using <span class="math inline">\(T_n(x)\)</span> to estimate <span class="math inline">\(f(x)\)</span>. If <span class="math inline">\(\mid f^{(n+1)}(x) \mid \leq M\)</span> on <span class="math inline">\(\mid x-t\mid \leq d\)</span> then</p>
<p><span class="math display">\[ \mid R_n(x) \mid \leq \dfrac{M}{(n_1)!}(x-t)^{n+1}\]</span></p>
<div class="cell">
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-1-1.png" class="img-fluid" width="672"></p>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>