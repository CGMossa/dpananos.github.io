
make_data <- function(which='surv') {
  
  # Arm = A
  month <- 1:47
  n<- c(51, 50, 48, 42, 40, 32,25, 24, 21,19,16,15,15,15,12,11,11,11,9,9,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,5, 4, 4, 4, 3, 3, 3,3, 2, 2)
  s <- c(1, 2, 5, 2, 8, 7, 0, 3, 2, 2, 0, 0, 0, 3, 1, 0, 0, 1, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1)
  sprime <- rep(0, length(month))
  sprime[match(c(3, 7, 10, 11, 18, 37, 41, 45, 47), month)] <- 1
  A <- data.frame(month, n, s, sprime, arm='A')
  
  # Arm = B
  month <- c(seq(0.5, 9, 0.5), 10:27, seq(29, 77, 2))
  n <- c(45,45,45,44,44,44,43,41,38,35,33,31,28,26,25,25,25,24,24,23,22,21,21,21,20,19,19,16,16,16,14,14,14,13,12,12,11,11,11,11,11,10,10,9,9,8,8,8,8,7,6,6,4,4,3,3,2,2,1,1,1)
  s <- c(0,0,1,0,0,1,2,3,3,2,2,2,2,1,0,0,1,0,1,1,1,0,0,1,1,0,1,0,0,1,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0)
  sprime <- rep(0, length(month))
  sprime[match(c(6,21,25,37,41, 45,55,59,63,67,71,77), month)] <- 1
  sprime[match(18, month)] <- 2
  
  B <- data.frame(month, n, s, sprime, arm='B')
  
  d <- rbind(A, B)
  
  
  sd <- d %>% 
    select(-n) %>% 
    pivot_longer(-c(month, arm), values_to = 'wt') %>% 
    mutate(event = if_else(name=='s', 1, 0))
  
  if(which == 'logistic'){
    return(d)
  } else {
    return(sd)
  }
}
  